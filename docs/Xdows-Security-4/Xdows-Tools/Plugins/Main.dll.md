# Main.dll

## 简介

Main.dll 为 Xdows Tools 实际调用的DLL

Xdows Tools 通过调用这个DLL来实现插件功能

Main.dll 通常是在 插件名\Files\Main.dll 文件

## 注意

在编译DLL时尽量选择目标 Xdows Security 的架构（一般为 x86 架构）

不同的架构可能会导致运行**效率慢**或**崩溃**问题

## 使用
> [!IMPORTANT]
> 以下DLL程序中的必须存在
> 
> 如果不存在，程序将会崩溃


### SetUIHtml

|    名称   |  返回类型 |注明                                    |
| :-------- | :------- | :-------------------------------------- |
| SetUIHtml |   Text   |该函数定义在 Xdows Tools 中载入的 Html 文件|

该函数没有参数，如有参数则程序崩溃

### SetUITitle

![XdowsToolsUI](./../../PNG/XdowsToolsUI-Main.dll-1.md.png)

（示例：图中红框部分即为该DLL返回的内容显示效果）

|    名称    |  返回类型 |注明                               |
| :--------- | :-------- | :-------------------------------- |
| SetUITitle |    Text   |该函数定义在 Xdows Tools 中显示的标题|

该函数没有参数

### GetTabID

|    名称   |  返回类型 |注明                                                    |
| :-------- | :------- | :------------------------------------------------------ |
| GetTabID  |    Text  |该函数定义在 Xdows Tools 中的选择夹ID（不能和其它选择夹重复）|

该函数没有参数，如有参数则程序崩溃

### GetInfo

![XdowsToolsUI](./../../PNG/XdowsToolsUI-Main.dll-2.md.png)

（示例：图中红框部分即为该DLL返回的内容显示效果）

|    名称   |  返回类型 |注明                                                    |
| :-------- | :------- | :------------------------------------------------------ |
| GetInfo   |    Text  |该函数定义在 Xdows Tools 功能主页 显示的简介|

该函数没有参数，如有参数则程序崩溃

### ScanFiles

|    名称    |  返回类型 |注明                               |
| :--------- | :-------- | :-------------------------------- |
| ScanFiles  |    Text   |该函数用于在扫描文件时插件添加的额外引擎|

如果未检测到病毒或选择忽略此功能请返回空文本

如果检测到病毒请返回病毒名称

该函数的参数如下

| 名称 |  类型 |注明|
| :--- | :--- | :----------------------------------- |
| Path | Text |预扫描的文件名称。不可空，无需处理相关问题|

### Html文件内调用

你可以使用 Http 访问来调用DLL

``` js
const Http = new XMLHttpRequest();
Http.open("GET", '/Function/插件名-调用函数/?参数1=参数内容&参数2=参数内容',false);
Http.send();

```

> [!IMPORTANT]
> 参数最多只能有 2 个
>
> 多余参数将会被忽略
> 
> 调用的DLL函数返回值必须为 Text 型（不需要可返回空文本），参数必须为 Text 型
>
> 其它类型将会崩溃


